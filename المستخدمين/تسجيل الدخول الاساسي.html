<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>التحقق من الهاتف</title>
    
</head>
<body>
    <h1>التحقق من رقم الهاتف</h1>

    <!-- إدخال رقم الهاتف -->
    <label for="phone">أدخل رقم هاتفك:</label>
    <input type="text" id="phone" placeholder="رقم الهاتف"><br>

    <!-- إدخال كود التحقق -->
    <label for="otp">أدخل كود التحقق:</label>
    <input type="text" id="otp" placeholder="كود التحقق"><br>

    <!-- زر الإرسال -->
    <button onclick="sendOTP()">إرسال كود التحقق</button><br><br>
    <button onclick="verifyOTP()">تسجيل الدخول</button>

    <script>
        // وظيفة لتوليد كود تحقق عشوائي
        function generateOTP() {
            return Math.floor(10000 + Math.random() * 90000).toString(); // كود مكون من 5 أرقام
        }

        // وظيفة لإرسال كود التحقق
        function sendOTP() {
            const phone = document.getElementById('phone').value;

            if (!phone) {
                alert('يرجى إدخال رقم الهاتف');
                return;
            }

            // التحقق من وجود المستخدم في قائمة الحظر
            let blockedUsers = JSON.parse(localStorage.getItem('blockedUsers')) || [];
            if (blockedUsers.includes(phone)) {
                alert('هذا المستخدم محظور من استخدام الخدمة.');
                return;
            }

            const otpCode = generateOTP();
            const user = { phone, otp: otpCode };

            let users = JSON.parse(localStorage.getItem('users')) || [];
            users.push(user);
            localStorage.setItem('users', JSON.stringify(users)); // حفظ المستخدمين في localStorage

            alert(`تم إرسال كود التحقق إلى رقم الهاتف: ${phone}\nكود التحقق هو: ${otpCode}`);
        }

        // وظيفة للتحقق من الكود المدخل
        function verifyOTP() {
            const userOTP = document.getElementById('otp').value;

            if (!userOTP) {
                alert('يرجى إدخال كود التحقق');
                return;
            }

            let users = JSON.parse(localStorage.getItem('users')) || [];
            const user = users.find(u => u.otp === userOTP);

            if (user) {
                alert('تم التحقق بنجاح!');
                // توجيه المستخدم إلى الصفحة الرئيسية
                window.location.href = 'go:Ostora';  // إعادة التوجيه بعد التحقق بنجاح
            } else {
                alert('كود التحقق غير صحيح. يرجى المحاولة مرة أخرى.');
            }
        }

        // تتبع حركة المؤشر
        document.addEventListener('mousemove', (e) => {
            const x = e.clientX;
            const y = e.clientY;

            // إنشاء عنصر جديد
            const particle = document.createElement('div');
            particle.classList.add('particle');

            // تحديد حجم النقطة وموقعها
            const size = Math.random() * 10 + 5;
            particle.style.width = `${size}px`;
            particle.style.height = `${size}px`;
            particle.style.left = `${x}px`;
            particle.style.top = `${y}px`;

            // اختيار لون عشوائي
            const colors = ['#f39c12', '#e74c3c', '#8e44ad', '#3498db', '#2ecc71'];
            particle.style.background = colors[Math.floor(Math.random() * colors.length)];

            // إضافة النقطة إلى الصفحة
            document.body.appendChild(particle);

            // إزالة النقطة بعد انتهاء الحركة
            setTimeout(() => {
                particle.remove();
            }, 1500);
        });
    </script>
</body>
</html>
